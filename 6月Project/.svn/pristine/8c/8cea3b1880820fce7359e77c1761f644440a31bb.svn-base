
  Store= extend( function Store(context,x,y,width,height,forword){
    
     	this.init=function (){
     			
		  	Store.prototype.init.apply(this,arguments)
			this.lineWidth=1;
		  this.cxt=context;
		  this.x1=x-width/2;
			this.y1=y-height/2;
		  this.x2=x+width/2;
			this.y2=y+height/2;
			this.x=x;
			this.y=y;
  			
  			this.rectangle1=new Rectangle(context,this.x1,this.y1,this.x2,this.y2);
     		
     		this.graphs.push(this.rectangle1);
     		
     	}
        this.init();
    
    },ComplexGraph)
    
  CarrierChain =   extend(function CarrierChain(id,context,x,y,width,forword){
      	this.init=function (){
      	var	height=12;
      	this.id=id;
  			CarrierChain.prototype.init.apply(this,arguments)
				this.cxt=context;
				this.rotateAngle=forword|0;
				this.gap=5;
				this.x=x;
				this.y=y;
				this.x1= x-width/2;
				this.x2= x+width/2;
				this.y1=y-height/2;
				this.y2=y+height/2;
				for( var xtmp=this.x1;xtmp<this.x2;xtmp+=this.gap){
			  		this.graphs.push(new Line({
			  	     			context:context,
			  	     			x1:xtmp,
			  	     			y1:this.y1,
			  	     			x2:xtmp,
			  	     			y2:this.y2
			  	     			
			  	     		}));
				}
				this.graphs.push(new Line({
  	     			context:context,
  	     			x1:this.x1,
  	     			y1:this.y1,
  	     			x2:this.x2,
  	     			y2:this.y1
  	     			
  	     		}));
				this.graphs.push(new Line({
  	     			context:context,
  	     			x1:this.x1,
  	     			y1:this.y2,
  	     			x2:this.x2,
  	     			y2:this.y2
  	     			
  	     		}));
   			}
   			 this.draw=function(){
						context.save(); 
			   		if(this.rotateAngle){
			      		context.translate(x, y);   
			      		context.rotate(forword * Math.PI / 180);//旋转47�??   
			      		context.translate(-x, -y);   
				    }
				   
				    
			  		CarrierChain.prototype.draw.apply(this,arguments)
					  
		      	context.restore(); 
		      	
		      	 var oldstrokeStyle =context.strokeStyle
				    var oldFont = context.font;
				    var oldfillStyle = context.fillStyle;
				    context.strokeStyle= 'rgba(0,0,0,0.1)'
    		    context.font="bold 12px 宋体";
    		    context.fillStyle='#0000ff'
    		    
      		  context.fillText(id,this.x-3,this.y+4);
    		    
    		    context.strokeStyle= oldstrokeStyle
    		    context.font=oldFont;
    		    context.fillStyle=oldfillStyle;
  			 }
   
   	 this.init();
   } ,ComplexGraph);
    
   Yzj=  extend( function Yzj(id,context,x,y,width,height){
           this.init=	function (){
           		this.id=id
  				Yzj.prototype.init.apply(this,arguments)
     
     	  		this.x=x;
				    this.y=y;
        		this. x1= x-width/2;
		  		this. x2= x+width/2;
		  		this. y1=y-height/2;
		  		this. y2=y+height/2;
		  		this.cxt=context;
		  		this.graphs.push(new Line(
		  				{
		  	     			context:this.cxt,
		  	     			x1:this.x1,
		  	     			y1:this.y1,
		  	     			x2:this.x2,
		  	     			y2:this.y1,
		  	     			width:2
		  	     			
		  	     		}));
       		    this.graphs.push(new Line({
		  	     			context:this.cxt,
		  	     			x1:this.x1,
		  	     			y1:this.y2,
		  	     			x2:this.x2,
		  	     			y2:this.y2,
		  	     			width:2
		  	     			
		  	     		}));
        		this.graphs.push(new Line(
        				{
        					context:this.cxt,
		  	     			x1:this.x1+2,
		  	     			y1:this.y1,
		  	     			x2:this.x1+2,
		  	     			y2:this.y2,
		  	     			width:2
		  	     			
		  	     		}));
        		this.graphs.push(new Line({
  	     			context:this.cxt,
  	     			x1:this.x1+6,
  	     			y1:this.y1,
  	     			x2:this.x1+6,
  	     			y2:this.y2
  	     			
  	     		}));
       		    this.graphs.push(new  Line({
  	     			context:this.cxt,
  	     			x1:this.x2-2,
  	     			y1:this.y1,
  	     			x2:this.x2-2,
  	     			y2:this.y2
  	     			
  	     		}));
        		this.graphs.push(new  Line({
  	     			context:this.cxt,
  	     			x1:this.x2-6,
  	     			y1:this.y1,
  	     			x2:this.x2-6,
  	     			y2:this.y2
  	     			
  	     		}));
        		this.graphs.push(new  Line({
          	     			context:this.cxt,
          	     			x1:(this.x1+this.x2)/2,
          	     			y1:this.y1,
          	     			x2:(this.x1+this.x2)/2,
          	     			y2:this.y2,
          	     			width:4
          	     			
          	     		}));
        }
        this.draw=function(){
						 Yzj.prototype.draw.apply(this,arguments)
		      	/*
		      	var oldstrokeStyle =context.strokeStyle
				    var oldFont = context.font;
				    var oldfillStyle = context.fillStyle;
				    context.strokeStyle= 'rgba(0,0,0,0.1)'
    		    context.font="bold 12px 宋体";
    		    context.fillStyle='#0000ff'
    		    
      		  context.fillText(id,this.x-3,this.y+4);
    		    
    		    context.strokeStyle= oldstrokeStyle
    		    context.font=oldFont;
    		    context.fillStyle=oldfillStyle;*/
  			 }
   
         this.init();
      },ComplexGraph);
   Crane=  extend(  function Crane(context,x,y,width){
					  this.init=function (){
					  		
					      	Crane.prototype.init.apply(this,arguments)
					        this.xv=0//水平速度
			       	    this.xa=0//水平加速度
			       	    this.width=width;
				      		this.len = width*3;
				      		this.x1=x-this.len/2;
				      		this.y1=y-width/2;
				      		this.x2=x+this.len/2;
				      		this.y2=y+width/2;
					        this.x=x;
				   			  this.y=y;
				      
			      		 this.graphs.push(new Rectangle(context,this.x-width/2+3,this.y-width/2+3,this.x+width/2-3,this.y+width/2-3,2))
			      		 this.graphs.push(new Line({
	          	     			context:context,
	          	     			x1:this.x1,
	          	     			y1:this.y,
	          	     			x2:this.x2,
	          	     			y2:this.y,
	          	     			width:2
	          	     		})); 
			      		 this.graphs.push(new Line({
	          	     			context:context,
	          	     			x1:this.x1,
	          	     			y1:this.y-width/20,
	          	     			x2:this.x2,
	          	     			y2:this.y-width/20,
	          	     			width:2
	          	     		})); 
			      		 this.graphs.push(new Line({
	          	     			context:context,
	          	     			x1:this.x1,
	          	     			y1:this.y+width/20,
	          	     			x2:this.x2,
	          	     			y2:this.y+width/20,
	          	     			width:2
	          	     		})); 
			      
			      		 this.graphs.push(new Rectangle(context,this.x1,y-width/4*1.5,this.x1+width/2,this.y+width/4*1.5,1,"#000000"))
			      		 this.graphs.push(new Rectangle(context,this.x2-width/4,this.y-width/4*1.2,this.x2,this.y+width/4*1.2,1,"#000000"));
					    }
					    
					    this.draw=function(){
						    Crane.prototype.draw.apply(this,arguments)
		            context.drawImage(cranePic,this.x-this.len/2,this.y-this.width/2,this.len,this.width)
  			 			}
   
					     this.init();
      },ComplexGraph);
          
          
    Product= extend( function (context,x,y){
     this.init=function (){
        		
			  Product.prototype.init.apply(this,arguments)
		      this.width=12;
		      this.len=16;
		      this.x1=x-this.width/2;
		      this.y1=y-this.len/2;
		      this.x2=x+this.width/2;
		      this.y2=y+this.len/2;
		      this.x=x;
   			  this.y=y;
		      this.graphs.push(new   Rectangle(context,this.x1,this.y1,this.x2,this.y2,1,"#ff00ff"));
     		 }
       this.init();
      },ComplexGraph);
      
      
    StockProduct= extend( function (context,color){
     this.init=function (){
        		
			  StockProduct.prototype.init.apply(this,arguments)
		      this.width=4;
		      var x=y=0
		      this.len=4;
		      this.x1=x-this.width/2;
		      this.y1=y-this.len/2;
		      this.x2=x+this.width/2;
		      this.y2=y+this.len/2;
		      this.x=x;
   			  this.y=y;
   			
		      this.graphs.push(new   Rectangle(context,this.x1,this.y1,this.x2,this.y2,1,color));
     		 }
       this.init();
      },ComplexGraph);
      
           
  StoreRoom=  extend( function (context,x,y,config ){
  	config=config||{}
         this.storeWidth=12;
         this.storeHigth=6;
         this.shelfHigth=85;
         this.cols=82
         this.rows=config.rows||11
         this.shelfs=config.shelfs||8
         this.beginShelf=config.beginShelf||0;
			   this.init=function (){
			     	StoreRoom.prototype.init.apply(this,arguments)
			     	this.stores={};
	     			this.x=x;
	   			  this.y=y;
				    this.x1=x;
				    this.y1=y;
				    var wordX=this.x+this.cols*this.storeWidth/2
				    for(var shelfId=1;shelfId<=  this.shelfs;shelfId++){
				    	  var vallShelfkey=this.beginShelf+ shelfId
					    	var keyShelfId =vallShelfkey*10000;
					    	for (var col=1;col<= this.cols;col++){
						    		var keyRow=keyShelfId+col*100;
					          for(var row=1;row<= this.rows;row++){
					           	var key =keyRow+row;
					           	var tmpx=this.x1+(col-1)*this.storeWidth;
					           	var tmpy=this.y1+(13-row)*this.storeHigth+(shelfId-1)*this.shelfHigth;
					          	var store=new Store(context,tmpx,tmpy,this.storeWidth,this.storeHigth);
					            this.graphs.push(store);
					            this.stores['k'+key]=store;
					          }
				        }
				        var wordY=this.y1+(shelfId)*this.shelfHigth-8
				        var cfg={context:context,word:vallShelfkey,x:wordX,y:wordY,font:'bold 100px 宋体',fillStyle:'rgba(0,0,0,0.15)'}
				        var word=new Word(cfg);
					      this.graphs.push(word);
				    }
				    	
			     
			   }
			     this.init();
     	 
     	    
      } ,ComplexGraph);
  
  
  
  
  
  
