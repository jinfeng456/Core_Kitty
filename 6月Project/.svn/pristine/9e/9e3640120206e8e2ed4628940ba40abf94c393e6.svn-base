<template>
  <div class="page-container">
	<!--新增编辑界面-->
	<el-dialog :title="$t('field.receipt.stack')" width="50%" :visible.sync="detailDialogVisible"    :before-close="handleClose">
		<div class="toolbar" style="float:left;padding-top:10px;padding-left:15px;">
			<el-form :inline="true" :model="filters" :size="size">
				<el-form-item>
					<el-input v-model="filters.wmsBanthNo" :placeholder="$t('filters.banchNo')"></el-input>
				</el-form-item>	
				<el-form-item>
					<el-input v-model="filters.itemName" :placeholder="$t('filters.itemName')"></el-input>
				</el-form-item>		
				<el-form-item>
					<kt-button icon="fa fa-search" :label="$t('action.search')"  type="primary" @click="findPage(null)"/>
				</el-form-item>
			
			</el-form>
		</div>
		<kt-table :height="350" :data="pageResult" :columns="columns" @findPage="findPage" @handleEdit="handleEdit" > </kt-table>
	</el-dialog>
  </div>
</template>

<script>
import KtTable from "@/views/Core/KtTable"
import KtButton from "@/views/Core/KtButton"
export default {
	components:{
	
		KtTable,
		KtButton
	},
	props:{
		
	    detailDialogVisible:{
			type: Boolean
		}
	},
	data() {
		return {
			size: 'small',
			filters: {
				wmsBanthNo: '',
				itemName:''
			},
			columns: [],
			
			pageRequest: { pageNum: 1, pageSize: 10 },
			pageResult: {}
		}
	},
	computed: {
	},	
	methods: {
		
		// 获取分页数据
		findPage: function (data) {
			if(data!==null){
				this.filters.pageNum=data.pageRequest.pageNum
				this.filters.pageSize=data.pageRequest.pageSize
			}else{
				this.filters.pageNum=1
			}		
			this.$api.item.findPage(this.filters).then((res) => {
				this.pageResult = res.data
			
			}).then(data!=null?data.callback:'')
		},
		handleEdit:function(){

		},
		handleClose:function(){
  			this.$emit('detailHidden', {})
		}
	},
	mounted() {
	this.columns = [
				{prop:"itemName", label:"item.itemName", minWidth:120}, 
				{prop:"wmsBanthNo", label:"field.receipt.wmsBanthNo", minWidth:100},
				{prop:"count", label:"count", minWidth:100 , formatter:this.selectionFormat}
				
			]
	}
}
</script>

<style scoped>

</style>