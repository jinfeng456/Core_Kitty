using CMNetLib.Robots.Crane;
using GK.WCS.Client.Station;
using System;
using System.Windows.Forms;

namespace GK.WCS.Client.Control
{
    public partial class CraneManual:BaseControl {
        public int CraneId=0;
        public CraneManual()
        {
            InitializeComponent();
        }

  

        private void btnCancelEStop_Click(object sender,EventArgs e) {
            ManualOperation(ManualActionCode.STOP,1,0);
        }
        //急停
        private void btnEStop_Click(object sender,EventArgs e) {
            ManualOperation(ManualActionCode.EMERGENCY_STOP,1,0);
        }
       

        private void ManualOperation(ManualActionCode pManualActionCode,int forks,ushort num) {
            try {

                if(HttpCraneUtil.loadData(CraneId).craneStatus != CraneStatus.SystemManual) {
                    return;
                }

                HttpCraneUtil.ManualAction(CraneId,forks,pManualActionCode);
            } catch(Exception vEx) {
                error("手动操作[" + pManualActionCode + @"]错误:" + vEx.Message);
            
            }
        }

        private void button1_Click(object sender,EventArgs e) {
            ManualOperation(ManualActionCode.FORK2_RECENTER,2,(ushort)50);
        }


        private void btnForkStretchRecenter_Click(object sender,EventArgs e) {
            ManualOperation(ManualActionCode.FORK1_RECENTER,1,(ushort)50);
        }
    }
}
